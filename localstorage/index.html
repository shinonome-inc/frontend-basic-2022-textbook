<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.0"/><style data-styled="" data-styled-version="5.3.1">.insMYM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
data-styled.g1[id="header__StyledWrapper-sc-1rxdrcl-0"]{content:"insMYM,"}/*!sc*/
</style><link as="script" rel="preload" href="/webpack-runtime-f987be90d5c4ca327461.js"/><link as="script" rel="preload" href="/framework-64fa7b46955ed3949446.js"/><link as="script" rel="preload" href="/app-ec2b2bf9e3ea19dfac4b.js"/><link as="script" rel="preload" href="/component---src-pages-mdx-slug-tsx-d238951b7081dcfbc14b.js"/><link as="fetch" rel="preload" href="/page-data/localstorage/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1844045602.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header><div class="header__StyledWrapper-sc-1rxdrcl-0 insMYM"><div class="header__StyledText-sc-1rxdrcl-1 kFgiiT">header</div></div></header><ul><li><a href="/style-sample"><p>title: <!-- -->Style Sample</p><p>created_at: <!-- -->Tue Dec 27 2022 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/introduction"><p>title: <!-- -->イントロダクション - 完成像の把握</p><p>created_at: <!-- -->Tue Sep 21 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/environment"><p>title: <!-- -->環境構築</p><p>created_at: <!-- -->Mon Sep 20 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/atoms-title"><p>title: <!-- -->Atoms/Title</p><p>created_at: <!-- -->Thu Nov 11 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/atoms-editbutton"><p>title: <!-- -->Atoms/EditButton</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/atoms-addtaskbutton"><p>title: <!-- -->Atoms/AddTaskButton</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/atoms-checkbox"><p>title: <!-- -->Atoms/Checkbox</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/atoms-input"><p>title: <!-- -->Atoms/Input</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/molecules-task"><p>title: <!-- -->Molecules/Task</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/organisms-todocard"><p>title: <!-- -->Organisms/TodoCard</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/pages-mainpage"><p>title: <!-- -->Pages/MainPage</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/integrate"><p>title: <!-- -->ひとまず完成</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/localstorage"><p>title: <!-- -->Local Storageの使用</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/alert"><p>title: <!-- -->アラートの実装</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/the-end"><p>title: <!-- -->最終課題終了</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li></ul><main><p>title: <!-- -->Local Storageの使用</p><p>date: <!-- -->December 26, 2021</p><p>前回までで一通りTodoアプリとして使えるものは作れましたが、まだまだ使いづらい部分が多いです。
特に、ブラウザを閉じるとせっかく登録したタスクが全て消えてしまうのは致命的でしょう。
ここでは、ページから使用できるブラウザの記憶領域、Local Storageを使って、タスクの情報を保存できるようにしていきましょう。</p><p>編集するファイルは以下です。</p><h2>ディレクトリ構造</h2><pre><code>src
  └ components
    └ Organisms
      └ TodoCard
        └ index.jsx
</code></pre><h2>Local Storageのデータの読み書き</h2><p>Local Storageの中身はJavaScript内のオブジェクトと同じように、キーと値の組み合わせで出来ています。
ただし、キーと値はどちらもただの文字列しか受け付けないことに注意が必要です。</p><p>LocalStorageへデータを保存する場合は次のようにします。</p><pre><code>localStorage.setItem(&lt;キー文字列&gt;, &lt;値&gt;);
</code></pre><p>逆にデータを取り出す際には、次のようにします。</p><pre><code>const data = localStorage.getItem(&lt;キー文字列&gt;);
</code></pre><p>このとき、指定されたキーが存在しない場合はnullを返します。</p><p>これを利用して、Organisms/TodoCardに、</p><ul><li>初期化時にLocal Storageからタスクリストを取り出し、存在したらタスクリストのStateにその値を指定する。</li><li>タスクリストのStateが更新されたら、その都度Local StorageへStateの値を保存する。
という処理を追加しましょう。</li></ul><p>注意するべきは、先ほど書いた通りLocal Storageは文字列しか受け付けないため、
配列であるタスクリストのStateはそのままだと保存できないことです。
そのため、JavaScript上の配列やオブジェクトといったデータを、
復元可能な形の文字列形式であるJSONに変換してから保存する必要があります。
<code>JSON.stringify(&lt;変換前&gt;)</code>で変換、JSON文字列からオブジェクトへの復元は<code>JSON.parse(&lt;JSON文字列&gt;)</code>でできます。</p></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/localstorage/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4387fe946caa62a6ad17.js"],"app":["/app-ec2b2bf9e3ea19dfac4b.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-73d7bf4dde124e6e1767.js"],"component---src-pages-mdx-slug-tsx":["/component---src-pages-mdx-slug-tsx-d238951b7081dcfbc14b.js"]};/*]]>*/</script><script src="/polyfill-4387fe946caa62a6ad17.js" nomodule=""></script><script src="/component---src-pages-mdx-slug-tsx-d238951b7081dcfbc14b.js" async=""></script><script src="/app-ec2b2bf9e3ea19dfac4b.js" async=""></script><script src="/framework-64fa7b46955ed3949446.js" async=""></script><script src="/webpack-runtime-f987be90d5c4ca327461.js" async=""></script></body></html>