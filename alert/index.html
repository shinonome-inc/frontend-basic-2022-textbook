<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.0"/><style data-styled="" data-styled-version="5.3.1">.insMYM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
data-styled.g1[id="header__StyledWrapper-sc-1rxdrcl-0"]{content:"insMYM,"}/*!sc*/
</style><link as="script" rel="preload" href="/frontend-basic-2022-textbook/webpack-runtime-af6308d4ea5ab27ae880.js"/><link as="script" rel="preload" href="/frontend-basic-2022-textbook/framework-64fa7b46955ed3949446.js"/><link as="script" rel="preload" href="/frontend-basic-2022-textbook/app-85fd1e98c66ea2e99f01.js"/><link as="script" rel="preload" href="/frontend-basic-2022-textbook/component---src-pages-mdx-slug-tsx-d238951b7081dcfbc14b.js"/><link as="fetch" rel="preload" href="/frontend-basic-2022-textbook/page-data/alert/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/frontend-basic-2022-textbook/page-data/sq/d/1844045602.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/frontend-basic-2022-textbook/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header><div class="header__StyledWrapper-sc-1rxdrcl-0 insMYM"><div class="header__StyledText-sc-1rxdrcl-1 kFgiiT">header</div></div></header><ul><li><a href="/frontend-basic-2022-textbook/style-sample"><p>title: <!-- -->Style Sample</p><p>created_at: <!-- -->Tue Dec 27 2022 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/introduction"><p>title: <!-- -->イントロダクション - 完成像の把握</p><p>created_at: <!-- -->Tue Sep 21 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/environment"><p>title: <!-- -->環境構築</p><p>created_at: <!-- -->Mon Sep 20 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/atoms-title"><p>title: <!-- -->Atoms/Title</p><p>created_at: <!-- -->Thu Nov 11 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/atoms-editbutton"><p>title: <!-- -->Atoms/EditButton</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/atoms-addtaskbutton"><p>title: <!-- -->Atoms/AddTaskButton</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/atoms-checkbox"><p>title: <!-- -->Atoms/Checkbox</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/atoms-input"><p>title: <!-- -->Atoms/Input</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/molecules-task"><p>title: <!-- -->Molecules/Task</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/organisms-todocard"><p>title: <!-- -->Organisms/TodoCard</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/pages-mainpage"><p>title: <!-- -->Pages/MainPage</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/integrate"><p>title: <!-- -->ひとまず完成</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/localstorage"><p>title: <!-- -->Local Storageの使用</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/alert"><p>title: <!-- -->アラートの実装</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li><li><a href="/frontend-basic-2022-textbook/the-end"><p>title: <!-- -->最終課題終了</p><p>created_at: <!-- -->Sun Dec 26 2021 00:00:00 GMT+0000 (Coordinated Universal Time)</p></a></li></ul><main><p>title: <!-- -->アラートの実装</p><p>date: <!-- -->December 26, 2021</p><p>いよいよ最後の課題です。ここでは新しいReactの機能を交えながら、いままで学んできたことを振り返っていきましょう。</p><p>タスクを追加するときに、タスク名が入力されていなかったら、それは明らかにタスクとして使えませんよね。
そのため、タスク名の編集が終了したとき、タスク名が空文字列であったらタスクを消去する、そんな処理を追加したいと考えます。</p><p>しかし、タスクを勝手に削除してしまうのはユーザーにとっては一瞬ぎょっとする挙動です。
ですから、「あなたのタスクは名前がついていなかったので消しましたよ」としっかり伝えてあげる必要があります。
そのために、アラートを表示する仕組みも合わせて作成します。</p><p>作成、編集するファイルは以下です。</p><h2>ディレクトリ構造</h2><pre><code>src
  ├ components
  | ├ Atoms
  | | └ Alert
  | |   ├ index.jsx
  | |   └ story.jsx
  | └ Organisms
  |   ├ AlertManager
  |   | └ index.jsx
  |   └ TodoCard
  |     └ index.jsx
  └ contexts
    └ alert_handler.jsx
</code></pre><h2>Atoms/Alertの作成</h2><p>まずはアラート本体を作りましょう。</p><p>表示するテキストと、表示するかしないかはpropsで制御するとよいでしょう。</p><p>表示するときは一番外側の要素のclassを切り替えて、それぞれ切り替わるタイミングで透明度と表示位置のtransitionをかけるよう
スタイルを書きましょう。
Reactではclass名の指定はclassNameというpropsを介して行うことに注意してください。</p><h2>AlertHandlerContextの作成</h2><p>Atoms/Alertは後述するOrganisms/AlertManagerの中に配置し、それはOrganisms/TodoCardと同じ階層に配置されます。
ここで、TodoCardで発生したエラーをAlertまで伝えるにはどうしたらよいでしょうか。
一つの方法は、propsにエラーが発生したときの関数を渡しておき、
それをバケツリレー式に呼び出してゆきアラートの表示を実行するというものです。
今回はコンポーネントの階層が深くないのでそれでも可能と言えば可能ですが、もっと大規模なページになったとき、
果たしてコンポーネントの階層の深くで発生したエラーを伝えるために、通り道となる全てのコンポーネントのpropsに専用の関数を
付けるのは可能でしょうか。少なくともコードが汚く読みづらいものになるでしょう。</p><p>これを解決する、コンポーネントの階層をまたいデータの伝達を実現するものが、
ReactのContextです。</p><p>Contextの中身はざっくり言うと値とProviderに分かれています。
値は我々が好きなものを格納することができます。
一方でProviderというのはその値を仲介するためのReactコンポーネントで、
Contextとともに自動で生成されます。</p><p>実際に作って行きましょう。Contextを定義するファイルの書き方は</p></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/alert/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4387fe946caa62a6ad17.js"],"app":["/app-85fd1e98c66ea2e99f01.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-73d7bf4dde124e6e1767.js"],"component---src-pages-mdx-slug-tsx":["/component---src-pages-mdx-slug-tsx-d238951b7081dcfbc14b.js"]};/*]]>*/</script><script src="/frontend-basic-2022-textbook/polyfill-4387fe946caa62a6ad17.js" nomodule=""></script><script src="/frontend-basic-2022-textbook/component---src-pages-mdx-slug-tsx-d238951b7081dcfbc14b.js" async=""></script><script src="/frontend-basic-2022-textbook/app-85fd1e98c66ea2e99f01.js" async=""></script><script src="/frontend-basic-2022-textbook/framework-64fa7b46955ed3949446.js" async=""></script><script src="/frontend-basic-2022-textbook/webpack-runtime-af6308d4ea5ab27ae880.js" async=""></script></body></html>